<html>
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Email and Text message application</title>

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">

	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	<script>
		$(document).ready(function(){
		    var from,to,subject,text,sendUsing;

		    $("#send_email_nodemailer").click(function(){
		    	sendUsing = "nodemailer";
		    	console.log(sendUsing);
		        to=$("#to").val();
		        subject=$("#subject").val();
		        text=$("#content").val();
		        $("#message").text("Sending E-mail...Please wait");
		        $.get("http://localhost:3000/send",{to:to,subject:subject,text:text,sendUsing:sendUsing},function(data){
			        if(data=="sent")
			        {
			            $("#message").empty().html("Email has been sent at "+to+" using NodeMailer. Please check inbox !").delay(2000).fadeOut();
			        }
				});
		    });
			$("#send_email_sendgrid").click(function(){
			    sendUsing = "sendgrid";
			    console.log(sendUsing);
		        to=$("#to").val();
		        console.log(to);
		        subject=$("#subject").val();
		        text=$("#content").val();
		        $("#message").text("Sending E-mail...Please wait");
		        $.get("http://localhost:3000/send",{to:to,subject:subject,text:text,sendUsing:sendUsing},function(data){
			        if(data=="sent")
			        {
			            $("#message").empty().html("Email has been sent at "+to+" using SendGrid. Please check inbox !").delay(2000).fadeOut();
			        }
				});
		    });
		    $("#send_txt_twilio").click(function(){
			    sendUsing = "twilio";
			    console.log(sendUsing);
		        to=$("#to_phone").val();
		        body=$("#text_message").val();
		        $("#message_txt").text("Sending txt message...Please wait");
		        $.get("http://localhost:3000/send",{to:to,body:body,sendUsing:sendUsing},function(data){
			        if(data=="sent")
			        {
			            $("#message_txt").empty().html("Text message has been sent to "+to+" . Please check inbox !").delay(2000).fadeOut();
			        }
				});
		    });   
		    
		});
	</script>
</head>
<body>
    <div class="container">
      <div class="jumbotron">
        <div class="row marketing">
	        <div class="col-lg-6">
	        	<h2>Send an email to any id:</h2>
				<h4>Enter e-mail id</h4>
				<p><input id="to" type="text" placeholder="Enter email Id" /></p>

				<h4>Enter subject</h4>
				<p><input id="subject" type="text" placeholder="Write subject" /></p>

				<h4>Enter message body</h4>
				<p><textarea id="content" cols="40" rows="5" placeholder="Message body"></textarea></p>
				<p>
					<button id="send_email_nodemailer" class="btn btn-primary">Send Using NodeMailer </button>
					<button id="send_email_sendgrid" class="btn btn-primary">Send Using SendGrid </button>
				</p>
				<span id="message"></span>
	        </div>

	        <div class="col-lg-6">
	        	<h2>Send text message:</h2>
				<h4>Enter phone number</h4>
				<p><input id="to_phone" type="text" placeholder="Enter phone number" /></p>

				<h4>Enter message text</h4>
				<p><textarea id="text_message" cols="40" rows="5" placeholder="Message body"></textarea></p>

				<p><button id="send_txt_twilio" class="btn btn-primary">Send Text Message</button></p>
				<span id="message_txt"></span>
	        </div>
      	</div>
  	</div>

</body>
</html>